<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive CliftonStrengths — Mohammad Mujahid</title>
  <!-- D3 v7 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    :root{
      --bg: #071026;
      --card: rgba(255,255,255,0.04);
      --muted: #9fb2d8;
      --glass: rgba(255,255,255,0.04);
      --radius: 14px;
      --shadow: 0 18px 40px rgba(2,8,23,0.6);
      --gap: 14px;
      --font-sans: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font-sans);
      background: linear-gradient(180deg, #051022 0%, var(--bg) 100%);
      color: #eaf2ff;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      max-width:1100px;
      margin: 0 auto;
    }

    header.title{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:18px;
    }
    header.title h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.2px;
    }
    header.title p{
      margin:0;
      color:var(--muted);
      font-size:13px;
    }

    /* Controls */
    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      margin-bottom:16px;
      flex-wrap:wrap;
    }
    .controls input[type="search"]{
      padding:8px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02);
      color:var(--fg);
      min-width:220px;
    }
    .btn{
      padding:8px 12px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.06);
      color:#eaf2ff;
      cursor:pointer;
      font-weight:600;
    }
    .legend { display:flex; gap:12px; align-items:center; color:var(--muted); font-size:13px; }

    /* Grid columns */
    .grid{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      gap:var(--gap);
    }
    @media (max-width:900px){
      .grid{ grid-template-columns:1fr; }
    }

    .column{
      background:var(--card);
      border:1px solid rgba(255,255,255,0.04);
      padding:12px;
      border-radius:var(--radius);
      min-height:120px;
      box-shadow:var(--shadow);
      position:relative;
    }
    .column h3{
      margin:0 0 10px 0;
      font-size:13px;
      letter-spacing:0.6px;
    }
    .column .count {
      position:absolute;
      right:12px;
      top:12px;
      background:rgba(255,255,255,0.03);
      padding:6px 8px;
      border-radius:10px;
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.03);
    }

    /* Tile */
    .tile{
      display:flex;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,0.02);
      border-radius:10px;
      padding:8px;
      margin-bottom:8px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s;
      border-left:6px solid transparent;
    }
    .tile:hover{
      transform: translateY(-6px);
      background: rgba(255,255,255,0.035);
      box-shadow: 0 8px 30px rgba(2,8,23,0.6);
    }
    .rank{
      min-width:34px;
      height:34px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:8px;
      font-weight:800;
      font-size:14px;
      color: #fff;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.04);
    }
    .name{
      font-weight:700;
      font-size:14px;
    }
    .sub {
      font-size:12px;
      color:var(--muted);
    }

    /* Domain colors (use consistent palette) */
    .domain-executing { --domColor:#8b61ff; border-left-color: #8b61ff; }
    .domain-influencing { --domColor:#ff9b3f; border-left-color:#ff9b3f; }
    .domain-relationship { --domColor:#3aa0ff; border-left-color:#3aa0ff; }
    .domain-strategic { --domColor:#38d07a; border-left-color:#38d07a; }

    /* Tooltip */
    .tooltip{
      position:fixed;
      pointer-events:none;
      background: linear-gradient(180deg, rgba(10,16,28,0.98), rgba(6,10,18,0.95));
      color:#eaf2ff;
      padding:10px 12px;
      border-radius:10px;
      font-size:13px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow: 0 10px 30px rgba(2,8,23,0.6);
      max-width:320px;
      z-index:99999;
      display:none;
    }

    /* Details panel */
    #details {
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:14px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow:var(--shadow);
    }
    #details h2{ margin:0 0 6px 0; font-size:18px; }
    #details p{ margin:6px 0; color:var(--muted); font-size:13px; line-height:1.4; }

    /* stacked bar */
    .stackbar-wrap { margin-top:12px; display:flex; gap:12px; align-items:center; }
    .stack svg { height:16px; display:block; border-radius:8px; overflow:visible; }
    .stack-legend { display:flex; gap:8px; align-items:center; color:var(--muted); font-size:13px; }

    footer.small { margin-top:10px; color:var(--muted); font-size:12px; }

    /* faded */
    .muted { opacity:0.28; }

  </style>
</head>
<body>
  <div class="container" id="app">
    <header class="title">
      <div>
        <h1>Mohammad Mujahid — CliftonStrengths 34 (interactive)</h1>
        <p>You lead with Relationship Building themes — grid + details built with D3.js</p>
      </div>
    </header>

    <div class="controls">
      <input type="search" id="search" placeholder="Search strength name or rank (e.g., 'Relator' or '1')">
      <button class="btn" id="top5">Highlight Top 5</button>
      <button class="btn" id="exportCSV">Export CSV</button>
      <div style="flex:1"></div>
      <div class="legend">
        <span class="dot domain-relationship" style="width:12px;height:12px;border-radius:50%;display:inline-block"></span> Relationship
        <span class="dot domain-strategic" style="width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px"></span> Strategic
        <span class="dot domain-influencing" style="width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px"></span> Influencing
        <span class="dot domain-executing" style="width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px"></span> Executing
      </div>
    </div>

    <div id="gallupStrengths">
      <div class="grid" id="grid"></div>

      <div class="stackbar-wrap" style="margin-top:16px; align-items:center;">
        <div style="flex:1">
          <div id="stackbar"></div>
        </div>
        <div class="stack-legend" id="stackLegend"></div>
      </div>

      <div id="details">
        <h2>Click any strength to see details</h2>
        <p>Tip: hover to preview description. Use Search/Highlight Top 5/Export CSV for quick actions.</p>
      </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <footer class="small">
      Built with ❤️ using D3.js — code is educational and editable. (If your site header is sticky, add top padding to the container to avoid overlap.)
    </footer>
  </div>

<script>
/* ============================
   DATA: 34 strengths with domains and short descriptions
   ============================ */
const strengths = [
  { rank:1, name:"Relator", domain:"RELATIONSHIP", short:"You build close relationships and trust.", tips:"Use with customers: develop one-to-one rapport; in O2C, call the same AR contact to nurture relationships." },
  { rank:2, name:"Deliberative", domain:"EXECUTING", short:"Careful, cautious, risk-aware decision maker.", tips:"Use to evaluate exceptions and ACH/NSF cases before pushing for automation." },
  { rank:3, name:"Learner", domain:"STRATEGIC", short:"You love learning and improving.", tips:"Great for studying ICMAI — set micro-goals and learn one accounting concept per shift." },
  { rank:4, name:"Intellection", domain:"STRATEGIC", short:"You enjoy deep thinking and reflection.", tips:"Use for root-cause analysis when investigating complex payment mismatches." },
  { rank:5, name:"Input", domain:"STRATEGIC", short:"You collect ideas, facts and resources.", tips:"Build and maintain a quick-reference folder for bank codes and comment codes." },
  { rank:6, name:"Empathy", domain:"RELATIONSHIP", short:"You sense other people's feelings.", tips:"Helpful when handling upset customers; reflect back feelings to de-escalate." },
  { rank:7, name:"Individualization", domain:"RELATIONSHIP", short:"You see each person's uniqueness.", tips:"Customize communication templates — some customers prefer short emails, others phone calls." },
  { rank:8, name:"Developer", domain:"RELATIONSHIP", short:"You see and grow potential in others.", tips:"Mentor a new teammate on TANDEM processes gradually." },
  { rank:9, name:"Harmony", domain:"RELATIONSHIP", short:"You look for agreement and avoid conflict.", tips:"In dispute resolution, focus on shared goals to reach a compromise." },
  { rank:10, name:"Restorative", domain:"EXECUTING", short:"You love solving problems and fixing issues.", tips:"Perfect for exception queues — you’ll enjoy resolving partial remits and unclear checks." },

  { rank:11, name:"Ideation", domain:"STRATEGIC", short:"You generate fresh, creative ideas.", tips:"Propose small automation or template ideas to reduce repetitive manual steps." },
  { rank:12, name:"Connectedness", domain:"RELATIONSHIP", short:"You see links and a larger story.", tips:"Use when mapping how payments, credit holds, and statements affect customers." },
  { rank:13, name:"Competition", domain:"INFLUENCING", short:"You measure yourself and like to win.", tips:"Set a safe productivity target (e.g., daily matched checks) and beat your own score." },
  { rank:14, name:"Strategic", domain:"STRATEGIC", short:"You spot patterns and best paths forward.", tips:"Use to design an efficient daily workflow for ACH + check queues." },
  { rank:15, name:"Positivity", domain:"RELATIONSHIP", short:"You bring energy and enthusiasm.", tips:"Lift team morale on tough night shifts with short wins and celebrations." },
  { rank:16, name:"Discipline", domain:"EXECUTING", short:"You create structure, procedures, and routines.", tips:"Create a standard start-of-shift checklist for reviewing ACH and bank files." },
  { rank:17, name:"Futuristic", domain:"STRATEGIC", short:"You imagine exciting futures and possibilities.", tips:"Sketch a 6-month improvements roadmap for faster invoice retrievals." },
  { rank:18, name:"Significance", domain:"INFLUENCING", short:"You want to make an impact and be noticed.", tips:"Volunteer for a small cross-team project to raise visibility." },
  { rank:19, name:"Maximizer", domain:"INFLUENCING", short:"You turn good into great, focus on strengths.", tips:"Spot colleagues’ strengths and pair them for complex exceptions." },
  { rank:20, name:"Achiever", domain:"EXECUTING", short:"You have stamina and like finishing tasks.", tips:"Use a visible daily checklist to get the satisfaction of crossing off items." },

  { rank:21, name:"Responsibility", domain:"EXECUTING", short:"You are reliable and keep promises.", tips:"Own a weekly folder cleanup task (invoice folder) and show consistent follow-through." },
  { rank:22, name:"Analytical", domain:"STRATEGIC", short:"You examine data and look for cause and effect.", tips:"Use when reviewing chargeback patterns by bank/comment code." },
  { rank:23, name:"Focus", domain:"EXECUTING", short:"You concentrate and prioritize what matters.", tips:"Block 45 minutes for deep exception handling without Slack/phone." },
  { rank:24, name:"Self-Assurance", domain:"INFLUENCING", short:"Confident and decisive in your choices.", tips:"Take ownership when clarifying ambiguous remits with customers." },
  { rank:25, name:"Adaptability", domain:"RELATIONSHIP", short:"Flexible and present-centered; go with the flow.", tips:"Great on shift when priorities change; pivot to urgent bank items." },
  { rank:26, name:"Arranger", domain:"EXECUTING", short:"You organize but stay flexible to optimize.", tips:"Design an efficient folder & routing structure for invoice distribution." },
  { rank:27, name:"Consistency", domain:"EXECUTING", short:"Fairness, rules and same treatment for all.", tips:"Use consistent templates and SLAs to keep customer experience uniform." },
  { rank:28, name:"Belief", domain:"EXECUTING", short:"Values-driven and principled.", tips:"Bring ethics and clarity to disputes — document decisions for audits." },
  { rank:29, name:"Communication", domain:"INFLUENCING", short:"You explain and express ideas clearly.", tips:"Write crisp emails explaining remittance mismatches — customers appreciate clarity." },

  { rank:30, name:"Context", domain:"STRATEGIC", short:"You look to the past to understand the present.", tips:"When something repeats, check the historical transaction trail to learn patterns." },
  { rank:31, name:"Activator", domain:"INFLUENCING", short:"You make things happen — quick to start.", tips:"Launch small process tests to speed up a manual reconciliation step." },
  { rank:32, name:"Command", domain:"INFLUENCING", short:"You lead confidently and take charge.", tips:"Step up to drive a cross-team decision when there’s ambiguity." },
  { rank:33, name:"Woo", domain:"INFLUENCING", short:"You win others over and start conversations easily.", tips:"Use at onboarding calls to build rapport with new vendors." },
  { rank:34, name:"Includer", domain:"RELATIONSHIP", short:"You make people feel part of a group.", tips:"Make sure quieter teammates get credit in team updates." }
];

/* Domain order & colors */
const domainOrder = [
  { key:"EXECUTING", label:"Executing", css:"domain-executing", color:"#8b61ff" },
  { key:"INFLUENCING", label:"Influencing", css:"domain-influencing", color:"#ff9b3f" },
  { key:"RELATIONSHIP", label:"Relationship Building", css:"domain-relationship", color:"#3aa0ff" },
  { key:"STRATEGIC", label:"Strategic Thinking", css:"domain-strategic", color:"#38d07a" }
];

/* ====== Build UI with D3 (grid columns + tiles) ====== */
const grid = d3.select('#grid');

/* Create one column per domain */
const columns = grid.selectAll('.column')
  .data(domainOrder)
  .join('div')
    .attr('class','column')
    .attr('data-domain', d => d.key)
    .each(function(domainInfo){
      const col = d3.select(this);
      col.append('h3').text(domainInfo.label);
      col.append('div').attr('class','count').text('0');
      col.append('div').attr('class','list'); // will hold tiles
    });

/* function to update counts and tiles */
function renderTiles(data){
  domainOrder.forEach(dom => {
    const items = data.filter(d => d.domain === dom.key).sort((a,b)=> a.rank - b.rank);
    const list = grid.select(`[data-domain="${dom.key}"] .list`);
    // update count
    grid.select(`[data-domain="${dom.key}"] .count`).text(items.length);

    // bind tiles
    const tiles = list.selectAll('.tile')
      .data(items, d => d.rank);

    // exit
    tiles.exit().transition().duration(250).style('opacity',0).remove();

    // enter
    const enter = tiles.enter()
      .append('div')
        .attr('class', d => `tile ${dom.css}`)
        .style('opacity',0)
        .on('mousemove', tileMouseMove)
        .on('mouseout', tileMouseOut)
        .on('click', tileClick);

    enter.append('div').attr('class','rank').text(d => d.rank);
    const info = enter.append('div').style('min-width','0px'); // wrapper
    info.append('div').attr('class','name').text(d => d.name);
    info.append('div').attr('class','sub').text(d => `#${d.rank} • ${dom.label}`);

    // merge + transition
    enter.merge(tiles)
      .transition().duration(350)
      .style('opacity',1)
      .style('transform','translateY(0)');
  });
}

/* initial render */
renderTiles(strengths);

/* TOOLTIP elements */
const tooltip = d3.select('#tooltip');

function tileMouseMove(event, d){
  // show tooltip with short description
  tooltip.style('display','block')
         .html(`<strong style="display:block;margin-bottom:6px">${d.rank}. ${d.name}</strong>
                <div style="color:var(--muted);font-size:13px">${d.short}</div>`);
  // position tooltip near pointer, with small offset
  const [mx,my] = d3.pointer(event);
  const left = event.clientX + 12;
  const top = event.clientY + 12;
  tooltip.style('left', left + 'px').style('top', top + 'px');
  // highlight same-domain tiles
  d3.selectAll('.tile').classed('muted', t => t.domain !== d.domain);
}

function tileMouseOut(){
  tooltip.style('display','none');
  d3.selectAll('.tile').classed('muted', false);
}

function tileClick(event,d){
  // fill details panel
  const details = d3.select('#details');
  details.html(`
    <h2 style="color: var(--domColor)">${d.rank}. ${d.name} <span style="font-size:13px;color:var(--muted);margin-left:8px">(${d.domain})</span></h2>
    <p>${d.short}</p>
    <p><strong>How to use this strength (practical):</strong> ${d.tips}</p>
    <p style="margin-top:8px;font-size:13px;color:var(--muted)">Click another tile to view its notes. Use the Search to filter.</p>
  `);
  // set left border color dynamically
  // (we set a CSS var for visibility: find the domain color)
  const domColor = domainOrder.find(x => x.key===d.domain).color;
  details.select('h2').style('color', domColor);
}

/* ===== Stack bar showing distribution of domains ===== */
function renderStackBar(data){
  const counts = domainOrder.map(dom => {
    return { key: dom.key, label: dom.label, color: dom.color, count: data.filter(d => d.domain===dom.key).length };
  });
  const total = d3.sum(counts, d => d.count);

  const width = 520;
  const height = 16;
  d3.select('#stackbar').html(''); // clear
  const svg = d3.select('#stackbar').append('svg').attr('width', width).attr('height', height);

  let x = 0;
  counts.forEach(segment => {
    const segW = Math.round((segment.count / total) * width);
    svg.append('rect')
      .attr('x', x)
      .attr('y', 0)
      .attr('width', segW)
      .attr('height', height)
      .attr('fill', segment.color)
      .append('title').text(`${segment.label}: ${segment.count}`);
    x += segW;
  });

  // legend to right
  const legend = d3.select('#stackLegend').html('');
  counts.forEach(seg => {
    legend.append('div').style('display','flex').style('gap','6px').style('align-items','center').html(`
      <div style="width:12px;height:12px;border-radius:3px;background:${seg.color}"></div>
      <div style="font-size:13px;color:var(--muted)">${seg.label} (${seg.count})</div>
    `);
  });
}
renderStackBar(strengths);

/* ===== Controls: Search, Top5, Export CSV ===== */
d3.select('#search').on('input', function(){
  const q = this.value.trim().toLowerCase();
  if(!q){
    d3.selectAll('.tile').style('opacity',1);
    return;
  }
  d3.selectAll('.tile').each(function(d){
    const match = d.name.toLowerCase().includes(q) || String(d.rank) === q;
    d3.select(this).style('opacity', match ? 1 : 0.18);
  });
});

d3.select('#top5').on('click', function(){
  // highlight top 5 tiles (ranks 1..5) and scroll to first if visible
  d3.selectAll('.tile').style('opacity', t => (t.rank <=5 ? 1 : 0.12));
  // auto open details for rank 1
  const top = strengths.find(s => s.rank===1);
  if(top) tileClick(null, top);
});

d3.select('#exportCSV').on('click', function(){
  const rows = ["rank,name,domain,short"];
  strengths.forEach(s => rows.push(`${s.rank},"${s.name.replace(/"/g,'""')}","${s.domain}","${s.short.replace(/"/g,'""')}"`));
  const blob = new Blob([rows.join("\n")], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'clifton_strengths_34.csv';
  a.click();
  URL.revokeObjectURL(url);
});

/* ===== Responsive niceties: if header overlaps, add top padding (optional) ===== */
/* If you embed into a page with a fixed header, call:
     document.querySelector('#app').style.paddingTop = '80px';
   (example included in integration notes)
*/

/* If you want to re-render after editing data, call:
     renderTiles(newData); renderStackBar(newData);
*/

/* END OF SCRIPT */
</script>
</body>
</html>
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive CliftonStrengths — Mohammad Mujahid</title>
  <!-- D3 v7 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    :root{
      --bg: #071026;
      --card: rgba(255,255,255,0.04);
      --muted: #9fb2d8;
      --glass: rgba(255,255,255,0.04);
      --radius: 14px;
      --shadow: 0 18px 40px rgba(2,8,23,0.6);
      --gap: 14px;
      --font-sans: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font-sans);
      background: linear-gradient(180deg, #051022 0%, var(--bg) 100%);
      color: #eaf2ff;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      max-width:1100px;
      margin: 0 auto;
    }

    header.title{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:18px;
    }
    header.title h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.2px;
    }
    header.title p{
      margin:0;
      color:var(--muted);
      font-size:13px;
    }

    /* Controls */
    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      margin-bottom:16px;
      flex-wrap:wrap;
    }
    .controls input[type="search"]{
      padding:8px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02);
      color:var(--fg);
      min-width:220px;
    }
    .btn{
      padding:8px 12px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.06);
      color:#eaf2ff;
      cursor:pointer;
      font-weight:600;
    }
    .legend { display:flex; gap:12px; align-items:center; color:var(--muted); font-size:13px; }

    /* Grid columns */
    .grid{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      gap:var(--gap);
    }
    @media (max-width:900px){
      .grid{ grid-template-columns:1fr; }
    }

    .column{
      background:var(--card);
      border:1px solid rgba(255,255,255,0.04);
      padding:12px;
      border-radius:var(--radius);
      min-height:120px;
      box-shadow:var(--shadow);
      position:relative;
    }
    .column h3{
      margin:0 0 10px 0;
      font-size:13px;
      letter-spacing:0.6px;
    }
    .column .count {
      position:absolute;
      right:12px;
      top:12px;
      background:rgba(255,255,255,0.03);
      padding:6px 8px;
      border-radius:10px;
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.03);
    }

    /* Tile */
    .tile{
      display:flex;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,0.02);
      border-radius:10px;
      padding:8px;
      margin-bottom:8px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s;
      border-left:6px solid transparent;
    }
    .tile:hover{
      transform: translateY(-6px);
      background: rgba(255,255,255,0.035);
      box-shadow: 0 8px 30px rgba(2,8,23,0.6);
    }
    .rank{
      min-width:34px;
      height:34px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:8px;
      font-weight:800;
      font-size:14px;
      color: #fff;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.04);
    }
    .name{
      font-weight:700;
      font-size:14px;
    }
    .sub {
      font-size:12px;
      color:var(--muted);
    }

    /* Domain colors (use consistent palette) */
    .domain-executing { --domColor:#8b61ff; border-left-color: #8b61ff; }
    .domain-influencing { --domColor:#ff9b3f; border-left-color:#ff9b3f; }
    .domain-relationship { --domColor:#3aa0ff; border-left-color:#3aa0ff; }
    .domain-strategic { --domColor:#38d07a; border-left-color:#38d07a; }

    /* Tooltip */
    .tooltip{
      position:fixed;
      pointer-events:none;
      background: linear-gradient(180deg, rgba(10,16,28,0.98), rgba(6,10,18,0.95));
      color:#eaf2ff;
      padding:10px 12px;
      border-radius:10px;
      font-size:13px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow: 0 10px 30px rgba(2,8,23,0.6);
      max-width:320px;
      z-index:99999;
      display:none;
    }

    /* Details panel */
    #details {
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:14px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow:var(--shadow);
    }
    #details h2{ margin:0 0 6px 0; font-size:18px; }
    #details p{ margin:6px 0; color:var(--muted); font-size:13px; line-height:1.4; }

    /* stacked bar */
    .stackbar-wrap { margin-top:12px; display:flex; gap:12px; align-items:center; }
    .stack svg { height:16px; display:block; border-radius:8px; overflow:visible; }
    .stack-legend { display:flex; gap:8px; align-items:center; color:var(--muted); font-size:13px; }

    footer.small { margin-top:10px; color:var(--muted); font-size:12px; }

    /* faded */
    .muted { opacity:0.28; }

  </style>
</head>
<body>
  <div class="container" id="app">
    <header class="title">
      <div>
        <h1>Mohammad Mujahid — CliftonStrengths 34 (interactive)</h1>
        <p>You lead with Relationship Building themes — grid + details built with D3.js</p>
      </div>
    </header>

    <div class="controls">
      <input type="search" id="search" placeholder="Search strength name or rank (e.g., 'Relator' or '1')">
      <button class="btn" id="top5">Highlight Top 5</button>
      <button class="btn" id="exportCSV">Export CSV</button>
      <div style="flex:1"></div>
      <div class="legend">
        <span class="dot domain-relationship" style="width:12px;height:12px;border-radius:50%;display:inline-block"></span> Relationship
        <span class="dot domain-strategic" style="width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px"></span> Strategic
        <span class="dot domain-influencing" style="width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px"></span> Influencing
        <span class="dot domain-executing" style="width:12px;height:12px;border-radius:50%;display:inline-block;margin-left:8px"></span> Executing
      </div>
    </div>

    <div id="gallupStrengths">
      <div class="grid" id="grid"></div>

      <div class="stackbar-wrap" style="margin-top:16px; align-items:center;">
        <div style="flex:1">
          <div id="stackbar"></div>
        </div>
        <div class="stack-legend" id="stackLegend"></div>
      </div>

      <div id="details">
        <h2>Click any strength to see details</h2>
        <p>Tip: hover to preview description. Use Search/Highlight Top 5/Export CSV for quick actions.</p>
      </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <footer class="small">
      Built with ❤️ using D3.js — code is educational and editable. (If your site header is sticky, add top padding to the container to avoid overlap.)
    </footer>
  </div>

<script>
/* ============================
   DATA: 34 strengths with domains and short descriptions
   ============================ */
const strengths = [
  { rank:1, name:"Relator", domain:"RELATIONSHIP", short:"You build close relationships and trust.", tips:"Use with customers: develop one-to-one rapport; in O2C, call the same AR contact to nurture relationships." },
  { rank:2, name:"Deliberative", domain:"EXECUTING", short:"Careful, cautious, risk-aware decision maker.", tips:"Use to evaluate exceptions and ACH/NSF cases before pushing for automation." },
  { rank:3, name:"Learner", domain:"STRATEGIC", short:"You love learning and improving.", tips:"Great for studying ICMAI — set micro-goals and learn one accounting concept per shift." },
  { rank:4, name:"Intellection", domain:"STRATEGIC", short:"You enjoy deep thinking and reflection.", tips:"Use for root-cause analysis when investigating complex payment mismatches." },
  { rank:5, name:"Input", domain:"STRATEGIC", short:"You collect ideas, facts and resources.", tips:"Build and maintain a quick-reference folder for bank codes and comment codes." },
  { rank:6, name:"Empathy", domain:"RELATIONSHIP", short:"You sense other people's feelings.", tips:"Helpful when handling upset customers; reflect back feelings to de-escalate." },
  { rank:7, name:"Individualization", domain:"RELATIONSHIP", short:"You see each person's uniqueness.", tips:"Customize communication templates — some customers prefer short emails, others phone calls." },
  { rank:8, name:"Developer", domain:"RELATIONSHIP", short:"You see and grow potential in others.", tips:"Mentor a new teammate on TANDEM processes gradually." },
  { rank:9, name:"Harmony", domain:"RELATIONSHIP", short:"You look for agreement and avoid conflict.", tips:"In dispute resolution, focus on shared goals to reach a compromise." },
  { rank:10, name:"Restorative", domain:"EXECUTING", short:"You love solving problems and fixing issues.", tips:"Perfect for exception queues — you’ll enjoy resolving partial remits and unclear checks." },

  { rank:11, name:"Ideation", domain:"STRATEGIC", short:"You generate fresh, creative ideas.", tips:"Propose small automation or template ideas to reduce repetitive manual steps." },
  { rank:12, name:"Connectedness", domain:"RELATIONSHIP", short:"You see links and a larger story.", tips:"Use when mapping how payments, credit holds, and statements affect customers." },
  { rank:13, name:"Competition", domain:"INFLUENCING", short:"You measure yourself and like to win.", tips:"Set a safe productivity target (e.g., daily matched checks) and beat your own score." },
  { rank:14, name:"Strategic", domain:"STRATEGIC", short:"You spot patterns and best paths forward.", tips:"Use to design an efficient daily workflow for ACH + check queues." },
  { rank:15, name:"Positivity", domain:"RELATIONSHIP", short:"You bring energy and enthusiasm.", tips:"Lift team morale on tough night shifts with short wins and celebrations." },
  { rank:16, name:"Discipline", domain:"EXECUTING", short:"You create structure, procedures, and routines.", tips:"Create a standard start-of-shift checklist for reviewing ACH and bank files." },
  { rank:17, name:"Futuristic", domain:"STRATEGIC", short:"You imagine exciting futures and possibilities.", tips:"Sketch a 6-month improvements roadmap for faster invoice retrievals." },
  { rank:18, name:"Significance", domain:"INFLUENCING", short:"You want to make an impact and be noticed.", tips:"Volunteer for a small cross-team project to raise visibility." },
  { rank:19, name:"Maximizer", domain:"INFLUENCING", short:"You turn good into great, focus on strengths.", tips:"Spot colleagues’ strengths and pair them for complex exceptions." },
  { rank:20, name:"Achiever", domain:"EXECUTING", short:"You have stamina and like finishing tasks.", tips:"Use a visible daily checklist to get the satisfaction of crossing off items." },

  { rank:21, name:"Responsibility", domain:"EXECUTING", short:"You are reliable and keep promises.", tips:"Own a weekly folder cleanup task (invoice folder) and show consistent follow-through." },
  { rank:22, name:"Analytical", domain:"STRATEGIC", short:"You examine data and look for cause and effect.", tips:"Use when reviewing chargeback patterns by bank/comment code." },
  { rank:23, name:"Focus", domain:"EXECUTING", short:"You concentrate and prioritize what matters.", tips:"Block 45 minutes for deep exception handling without Slack/phone." },
  { rank:24, name:"Self-Assurance", domain:"INFLUENCING", short:"Confident and decisive in your choices.", tips:"Take ownership when clarifying ambiguous remits with customers." },
  { rank:25, name:"Adaptability", domain:"RELATIONSHIP", short:"Flexible and present-centered; go with the flow.", tips:"Great on shift when priorities change; pivot to urgent bank items." },
  { rank:26, name:"Arranger", domain:"EXECUTING", short:"You organize but stay flexible to optimize.", tips:"Design an efficient folder & routing structure for invoice distribution." },
  { rank:27, name:"Consistency", domain:"EXECUTING", short:"Fairness, rules and same treatment for all.", tips:"Use consistent templates and SLAs to keep customer experience uniform." },
  { rank:28, name:"Belief", domain:"EXECUTING", short:"Values-driven and principled.", tips:"Bring ethics and clarity to disputes — document decisions for audits." },
  { rank:29, name:"Communication", domain:"INFLUENCING", short:"You explain and express ideas clearly.", tips:"Write crisp emails explaining remittance mismatches — customers appreciate clarity." },

  { rank:30, name:"Context", domain:"STRATEGIC", short:"You look to the past to understand the present.", tips:"When something repeats, check the historical transaction trail to learn patterns." },
  { rank:31, name:"Activator", domain:"INFLUENCING", short:"You make things happen — quick to start.", tips:"Launch small process tests to speed up a manual reconciliation step." },
  { rank:32, name:"Command", domain:"INFLUENCING", short:"You lead confidently and take charge.", tips:"Step up to drive a cross-team decision when there’s ambiguity." },
  { rank:33, name:"Woo", domain:"INFLUENCING", short:"You win others over and start conversations easily.", tips:"Use at onboarding calls to build rapport with new vendors." },
  { rank:34, name:"Includer", domain:"RELATIONSHIP", short:"You make people feel part of a group.", tips:"Make sure quieter teammates get credit in team updates." }
];

/* Domain order & colors */
const domainOrder = [
  { key:"EXECUTING", label:"Executing", css:"domain-executing", color:"#8b61ff" },
  { key:"INFLUENCING", label:"Influencing", css:"domain-influencing", color:"#ff9b3f" },
  { key:"RELATIONSHIP", label:"Relationship Building", css:"domain-relationship", color:"#3aa0ff" },
  { key:"STRATEGIC", label:"Strategic Thinking", css:"domain-strategic", color:"#38d07a" }
];

/* ====== Build UI with D3 (grid columns + tiles) ====== */
const grid = d3.select('#grid');

/* Create one column per domain */
const columns = grid.selectAll('.column')
  .data(domainOrder)
  .join('div')
    .attr('class','column')
    .attr('data-domain', d => d.key)
    .each(function(domainInfo){
      const col = d3.select(this);
      col.append('h3').text(domainInfo.label);
      col.append('div').attr('class','count').text('0');
      col.append('div').attr('class','list'); // will hold tiles
    });

/* function to update counts and tiles */
function renderTiles(data){
  domainOrder.forEach(dom => {
    const items = data.filter(d => d.domain === dom.key).sort((a,b)=> a.rank - b.rank);
    const list = grid.select(`[data-domain="${dom.key}"] .list`);
    // update count
    grid.select(`[data-domain="${dom.key}"] .count`).text(items.length);

    // bind tiles
    const tiles = list.selectAll('.tile')
      .data(items, d => d.rank);

    // exit
    tiles.exit().transition().duration(250).style('opacity',0).remove();

    // enter
    const enter = tiles.enter()
      .append('div')
        .attr('class', d => `tile ${dom.css}`)
        .style('opacity',0)
        .on('mousemove', tileMouseMove)
        .on('mouseout', tileMouseOut)
        .on('click', tileClick);

    enter.append('div').attr('class','rank').text(d => d.rank);
    const info = enter.append('div').style('min-width','0px'); // wrapper
    info.append('div').attr('class','name').text(d => d.name);
    info.append('div').attr('class','sub').text(d => `#${d.rank} • ${dom.label}`);

    // merge + transition
    enter.merge(tiles)
      .transition().duration(350)
      .style('opacity',1)
      .style('transform','translateY(0)');
  });
}

/* initial render */
renderTiles(strengths);

/* TOOLTIP elements */
const tooltip = d3.select('#tooltip');

function tileMouseMove(event, d){
  // show tooltip with short description
  tooltip.style('display','block')
         .html(`<strong style="display:block;margin-bottom:6px">${d.rank}. ${d.name}</strong>
                <div style="color:var(--muted);font-size:13px">${d.short}</div>`);
  // position tooltip near pointer, with small offset
  const [mx,my] = d3.pointer(event);
  const left = event.clientX + 12;
  const top = event.clientY + 12;
  tooltip.style('left', left + 'px').style('top', top + 'px');
  // highlight same-domain tiles
  d3.selectAll('.tile').classed('muted', t => t.domain !== d.domain);
}

function tileMouseOut(){
  tooltip.style('display','none');
  d3.selectAll('.tile').classed('muted', false);
}

function tileClick(event,d){
  // fill details panel
  const details = d3.select('#details');
  details.html(`
    <h2 style="color: var(--domColor)">${d.rank}. ${d.name} <span style="font-size:13px;color:var(--muted);margin-left:8px">(${d.domain})</span></h2>
    <p>${d.short}</p>
    <p><strong>How to use this strength (practical):</strong> ${d.tips}</p>
    <p style="margin-top:8px;font-size:13px;color:var(--muted)">Click another tile to view its notes. Use the Search to filter.</p>
  `);
  // set left border color dynamically
  // (we set a CSS var for visibility: find the domain color)
  const domColor = domainOrder.find(x => x.key===d.domain).color;
  details.select('h2').style('color', domColor);
}

/* ===== Stack bar showing distribution of domains ===== */
function renderStackBar(data){
  const counts = domainOrder.map(dom => {
    return { key: dom.key, label: dom.label, color: dom.color, count: data.filter(d => d.domain===dom.key).length };
  });
  const total = d3.sum(counts, d => d.count);

  const width = 520;
  const height = 16;
  d3.select('#stackbar').html(''); // clear
  const svg = d3.select('#stackbar').append('svg').attr('width', width).attr('height', height);

  let x = 0;
  counts.forEach(segment => {
    const segW = Math.round((segment.count / total) * width);
    svg.append('rect')
      .attr('x', x)
      .attr('y', 0)
      .attr('width', segW)
      .attr('height', height)
      .attr('fill', segment.color)
      .append('title').text(`${segment.label}: ${segment.count}`);
    x += segW;
  });

  // legend to right
  const legend = d3.select('#stackLegend').html('');
  counts.forEach(seg => {
    legend.append('div').style('display','flex').style('gap','6px').style('align-items','center').html(`
      <div style="width:12px;height:12px;border-radius:3px;background:${seg.color}"></div>
      <div style="font-size:13px;color:var(--muted)">${seg.label} (${seg.count})</div>
    `);
  });
}
renderStackBar(strengths);

/* ===== Controls: Search, Top5, Export CSV ===== */
d3.select('#search').on('input', function(){
  const q = this.value.trim().toLowerCase();
  if(!q){
    d3.selectAll('.tile').style('opacity',1);
    return;
  }
  d3.selectAll('.tile').each(function(d){
    const match = d.name.toLowerCase().includes(q) || String(d.rank) === q;
    d3.select(this).style('opacity', match ? 1 : 0.18);
  });
});

d3.select('#top5').on('click', function(){
  // highlight top 5 tiles (ranks 1..5) and scroll to first if visible
  d3.selectAll('.tile').style('opacity', t => (t.rank <=5 ? 1 : 0.12));
  // auto open details for rank 1
  const top = strengths.find(s => s.rank===1);
  if(top) tileClick(null, top);
});

d3.select('#exportCSV').on('click', function(){
  const rows = ["rank,name,domain,short"];
  strengths.forEach(s => rows.push(`${s.rank},"${s.name.replace(/"/g,'""')}","${s.domain}","${s.short.replace(/"/g,'""')}"`));
  const blob = new Blob([rows.join("\n")], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'clifton_strengths_34.csv';
  a.click();
  URL.revokeObjectURL(url);
});

/* ===== Responsive niceties: if header overlaps, add top padding (optional) ===== */
/* If you embed into a page with a fixed header, call:
     document.querySelector('#app').style.paddingTop = '80px';
   (example included in integration notes)
*/

/* If you want to re-render after editing data, call:
     renderTiles(newData); renderStackBar(newData);
*/

/* END OF SCRIPT */
</script>
</body>
</html>
