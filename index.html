<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clifton - Strengths</title>
  <!-- D3 v7 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    :root{
      --bg:#04060b; --fg:#eaf2ff; --muted:#9fb2d8; --glass:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.12);
      --radius:18px; --shadow:0 30px 80px rgba(0,0,0,.6);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
body {
  margin: 0;
  color: var(--fg);
  background: #04060b;   /* keep only the dark base color, no cloudy gradient */
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  overflow-x: hidden;
}
    /* ===== LAYERS ===== */
    .layer{position:fixed; inset:0; pointer-events:none}
    #stars1,#stars2,#stars3{z-index:-3}
#nebula {
  z-index: -2;
  filter: blur(40px) saturate(120%);
  background:
    radial-gradient(40% 40% at 15% 20%, rgba(122,162,255,.30), transparent 70%),
    radial-gradient(35% 35% at 85% 15%, rgba(79,240,176,.25), transparent 70%),
    radial-gradient(50% 50% at 60% 80%, rgba(138,122,255,.22), transparent 70%),
    radial-gradient(30% 30% at 20% 85%, rgba(255,200,120,.18), transparent 70%);
  background-repeat: no-repeat;
  background-size: cover;
  animation: drift 24s ease-in-out infinite alternate;
}
    @keyframes drift{from{transform:translate3d(0,0,0)}to{transform:translate3d(0,-2%,0)}}

    .container{
      max-width:1100px;
      margin: 0 auto;
    }

    header.title{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:18px;
    }
    header.title h1{
      margin:0;
      font-size:20px;
      letter-spacing:0.2px;
    }
    header.title p{
      margin:0;
      color:var(--muted);
      font-size:13px;
    }

    /* Controls */
    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      margin-bottom:16px;
      flex-wrap:wrap;
    }
    .controls input[type="search"]{
      padding:8px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02);
      color:var(--fg);
      min-width:220px;
    }
    .btn{
      padding:8px 12px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.06);
      color:#eaf2ff;
      cursor:pointer;
      font-weight:600;
    }
    .legend { display:flex; gap:12px; align-items:center; color:var(--muted); font-size:13px; }

    /* Grid columns */
    .grid{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      gap:var(--gap);
    }
    @media (max-width:900px){
      .grid{ grid-template-columns:1fr; }
    }

    .column{
      background:var(--card);
      border:1px solid rgba(255,255,255,0.04);
      padding:12px;
      border-radius:var(--radius);
      min-height:120px;
      box-shadow:var(--shadow);
      position:relative;
    }
    .column h3{
      margin:0 0 10px 0;
      font-size:13px;
      letter-spacing:0.6px;
    }
    .column .count {
      position:absolute;
      right:12px;
      top:12px;
      background:rgba(255,255,255,0.03);
      padding:6px 8px;
      border-radius:10px;
      font-size:12px;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.03);
    }

    /* Tile */
    /* Tile */
    .tile{
      display:flex;
      align-items:center;
      gap:10px;
      background: rgba(255,255,255,0.02);
      border-radius:10px;
      padding:8px;
      margin-bottom:8px;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s;
      border-left:6px solid transparent;
    }
    .tile:hover{
      transform: translateY(-6px);
      background: rgba(255,255,255,0.035);
      box-shadow: 0 8px 30px rgba(2,8,23,0.6);
    }
    .rank{
      min-width:34px;
      height:34px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:8px;
      font-weight:800;
      font-size:14px;
      color: #fff;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.04);
    }
    .name{
      font-weight:700;
      font-size:14px;
    }
    .sub {
      font-size:12px;
      color:var(--muted);
    }
    /* Domain colors (use consistent palette) */
    .domain-executing { --domColor:#8b61ff; border-left-color: #8b61ff; }
    .domain-influencing { --domColor:#ff9b3f; border-left-color:#ff9b3f; }
    .domain-relationship { --domColor:#3aa0ff; border-left-color:#3aa0ff; }
    .domain-strategic { --domColor:#38d07a; border-left-color:#38d07a; }

    /* Tooltip */
    .tooltip{
      position:fixed;
      pointer-events:none;
      background: linear-gradient(180deg, rgba(10,16,28,0.98), rgba(6,10,18,0.95));
      color:#eaf2ff;
      padding:10px 12px;
      border-radius:10px;
      font-size:13px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow: 0 10px 30px rgba(2,8,23,0.6);
      max-width:320px;
      z-index:99999;
      display:none;
    }

    /* Details panel */
    #details {
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:14px;
      border:1px solid rgba(255,255,255,0.04);
      box-shadow:var(--shadow);
    }
    #details h2{ margin:0 0 6px 0; font-size:18px; }
    #details p{ margin:6px 0; color:var(--muted); font-size:13px; line-height:1.4; }

    /* stacked bar */
    .stackbar-wrap { margin-top:12px; display:flex; gap:12px; align-items:center; }
    .stack svg { height:16px; display:block; border-radius:8px; overflow:visible; }
    .stack-legend { display:flex; gap:8px; align-items:center; color:var(--muted); font-size:13px; }

    footer.small { margin-top:10px; color:var(--muted); font-size:12px; }

    /* faded */
    .muted { opacity:0.28; }
.tile.highlighted {
  transform: scale(1.05); /* subtle zoom */
  box-shadow: 0 12px 35px rgba(2,8,23,0.7);
  background: rgba(255,255,255,0.06);
}
#svgBarWrap, #stackbar{ width:100%; overflow:hidden; }
/* Make the colorful stacked bar compact on desktop */
#stackbar svg{
  width: clamp(260px, 50vw, 520px);
  height: auto;
  max-width: 100%;
}

/* Keep the legend wrapping nicely around it */
.stackbar-wrap{
  flex-wrap: wrap;
  align-items: center;
  gap: 12px;
}
#stackLegend{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  min-width: 0;
}
html, body{ overflow-x: hidden; }
/* Desktop container cap */
.container, #app, #gallupStrengths, .grid{
  width: 100%;
  max-width: 1100px;      /* pick your desktop cap */
  margin-left: auto;
  margin-right: auto;
}

/* Left-align and cap the DNA bar size */
#svgBarWrap{
  display: block;           /* no centering */
}
#svgBarWrap svg{
  /* min 260px, prefers 40vw, max 420px */
  width: clamp(300px, 50vw, 560px);
  height: auto;
  max-width: 100%;
}
    /* Cap charts so they don’t stretch on ultrawide */
#svgBarWrap{ display: block; }
#svgBarWrap svg{
  max-width: 560px;   /* desktop cap */
  width: 100%;
  height: auto;
}
#stackbar svg{
  max-width: 520px;   /* desktop cap */
  width: 100%;
  height: auto;
}


    .layer{ position: fixed; inset: 0; pointer-events: none; max-width: 100vw; }

    

    /* Guardrail: never allow horizontal scroll */
html, body{ overflow-x: hidden; }

/* Mobile layout: dense, contained, tap-friendly */
/* Mobile: readable glass tiles, no overflow */
@media (max-width: 900px){
  .grid{ grid-template-columns: 1fr; }

  .column .list{
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 per row: better readability; change to 6 if desired */
    gap: 8px;
    min-width: 0;
  }

  .tile{
    aspect-ratio: 1 / 1;      /* keep square */
    padding: 8px;
    margin: 0;
    gap: 8px;
    flex-direction: column;   /* stack vertically */
    align-items: flex-start;
    justify-content: flex-start;
    overflow: hidden;
  }

  .tile > div{ min-width: 0; }

  .rank{ width: 28px; height: 28px; font-size: 12px; }

  /* Name: allow two lines so full text can be seen */
  .name{
    font-size: 12px;
    line-height: 1.15;
    display: -webkit-box;
    -webkit-line-clamp: 2;     /* show up to 2 lines */
    -webkit-box-orient: vertical;
    overflow: hidden;
    max-width: 100%;
  }

  /* Show a tiny subline (domain + rank) or custom snippet */
  .sub{
    display: block;
    font-size: 11px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }

  /* Hide tooltip on touch */
  .tooltip{ display: none !important; }
}

/* Ultra-small phones: use 4 per row */
@media (max-width: 420px){
  .column .list{ grid-template-columns: repeat(4, 1fr); }
}

/* Guardrail: no horizontal scroll */
html, body{ overflow-x: hidden; }
.container, #gallupStrengths, .grid, .column, .column .list{ min-width: 0; }
    
/* Hidden by default */
.mobile-modal {
  display: none;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 70%;
  background: #111827;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.6);
  z-index: 9999;
  animation: slideUp 0.3s ease;
  color: white;
  overflow-y: auto;
}

/* Inner content */
.mobile-modal-content {
  padding: 20px;
  font-family: sans-serif;
}

/* Close button */
.mobile-modal .close-btn {
  font-size: 28px;
  font-weight: bold;
  float: right;
  cursor: pointer;
  color: #aaa;
}
.mobile-modal .close-btn:hover {
  color: white;
}

/* Slide up animation */
@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

/* Only apply modal on mobile */
@media (min-width: 901px){
  .mobile-modal{ display: none !important; }
}




















    
    
  </style>
</head>
<body>

  <!-- ===== BACKGROUND LAYERS ===== -->
  <canvas id="stars1" class="layer" aria-hidden="true"></canvas>
  <canvas id="stars2" class="layer" aria-hidden="true"></canvas>
  <canvas id="stars3" class="layer" aria-hidden="true"></canvas>
  <div id="nebula" class="layer" aria-hidden="true"></div>




  
  <div class="container" id="app">
    <header class="title">
      <div>
        <h1>My Clifton - Strengths</h1>
        <p>I lead with Relationship Building</p>
      </div>
    </header>

    <div class="controls">
      <input type="search" id="search" placeholder="Search strength name or rank (e.g., 'Relator' or '1')">
      <button class="btn" id="top5">Highlight Top 5</button>
      <div style="flex:1"></div>
    </div>

    <div id="svgBarWrap" style="margin:18px 0;"></div>
    
    <div id="gallupStrengths">
      <div class="grid" id="grid"></div>

      <div class="stackbar-wrap" style="margin-top:16px; align-items:center;">
        <div style="flex:1">
          <div id="stackbar"></div>
        </div>
        <div class="stack-legend" id="stackLegend"></div>
      </div>

      <div id="details">
        <h2>Click any strength to see details</h2>
      </div>
    </div>

    <div class="tooltip" id="tooltip"></div>
  </div>



<section id="relator-detail" style="margin-top:60px;">
  <h2 style="font-size:22px; margin-bottom:16px;">Relationship Building — Relator®</h2>
   <div id="svgBarWrap" style="margin:18px 0;"></div>

  <div class="strength-description" style="line-height:1.6; font-size:14px; color:#cfd9f3;">
    <h3 style="font-size:16px; color:#3aa0ff; margin-bottom:10px;">What Is Relator?</h3>
    <p>
      Relator talents describe a person’s attitude toward their relationships. People with strong Relator talents are drawn to
      others they already know. They do not necessarily shy away from meeting new people — in fact, they may have other
      themes that cause them to enjoy the thrill of turning strangers into friends — but they do derive a great deal of
      pleasure and strength from being around their close friends. A person with strong Relator talents forms close
      relationships with people.
    </p>

    <h3 style="font-size:16px; color:#3aa0ff; margin:20px 0 10px 0;">Why Your Relator Is Unique</h3>
    <p>
      You are a well-read individual. People whom you have befriended turn to you for guidance. Often you help them see a
      situation or problem from a different perspective because of something you discovered while reading a book or article.
      You value deep friendships more than many acquaintances and bond best with people who share your trust and values.
    </p>
    <p>
      You are productive when allowed to work independently, though you also bond strongly with a few people who share clear
      goals. You thrive on mutual warmth, care, and affection.
    </p>
  </div>
</section>













































    <script>
    /* ========= Parallax starfields (3 layers for depth) ========= */
    const DPR = Math.min(2, window.devicePixelRatio || 1);
    const layers = [
      { id: 'stars1', count: 200, speed: 0.15, size: 1.0 }, // far
      { id: 'stars2', count: 140, speed: 0.35, size: 1.6 }, // mid
      { id: 'stars3', count: 90,  speed: 0.65, size: 2.2 }  // near
    ];

    function Starfield(layer){
      const cvs = document.getElementById(layer.id); const ctx = cvs.getContext('2d');
      let w, h, stars=[]; let mx=0, my=0; // parallax
      function resize(){ w = cvs.width = innerWidth * DPR; h = cvs.height = innerHeight * DPR; cvs.style.width = innerWidth+'px'; cvs.style.height = innerHeight+'px';
        stars = Array.from({length: layer.count}, ()=>({ x: Math.random()*w, y: Math.random()*h, a: Math.random()*0.7+0.2 })); }
      resize(); addEventListener('resize', resize);
      addEventListener('mousemove', (e)=>{ mx = (e.clientX/innerWidth - .5); my = (e.clientY/innerHeight - .5); });
      function draw(){ ctx.clearRect(0,0,w,h); ctx.fillStyle = '#fff';
        for(const s of stars){ const px = s.x + mx*20*layer.speed; const py = s.y + my*20*layer.speed; ctx.globalAlpha = s.a; ctx.fillRect(px, py, layer.size*DPR, layer.size*DPR); }
        requestAnimationFrame(draw); }
      draw();
      return {ctx, get size(){return {w,h}}, pushMeteor};

      function pushMeteor(x,y,vx,vy){ // gradient trail line
        const grad = ctx.createLinearGradient(x,y, x-vx*14, y-vy*14);
        grad.addColorStop(0,'rgba(255,255,255,.95)'); grad.addColorStop(1,'rgba(122,162,255,0)');
        ctx.strokeStyle = grad; ctx.lineWidth = 1.5*DPR; ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(x-vx*14, y-vy*14); ctx.stroke();
      }
    }
    const fields = layers.map(Starfield);

    /* ========= Random shooting stars ========= */
    const meteors = [];
    function spawnMeteor(){ if(document.visibilityState !== 'visible') return; const {w,h} = fields[2].size;
      meteors.push({ x: Math.random()*w, y: -20, vx: -6*DPR, vy: 6*DPR, life: 180 }); }
    setInterval(spawnMeteor, 2200);
    function drawMeteors(){ for(let i=meteors.length-1;i>=0;i--){ const m = meteors[i]; m.x += m.vx; m.y += m.vy; m.life -= 1; fields[2].pushMeteor(m.x,m.y,m.vx,m.vy); if(m.x < -50 || m.y > fields[2].size.h+50 || m.life<=0){ meteors.splice(i,1); } }
      requestAnimationFrame(drawMeteors); }
    drawMeteors();

    /* ========= Glitter comet cursor ========= */
    const sparks=[]; let last=0; function spawnSpark(x,y){ const s=document.createElement('span'); s.className='spark'; s.style.left=x+'px'; s.style.top=y+'px'; document.body.appendChild(s); sparks.push(s); if(sparks.length>40){ const old=sparks.shift(); old.remove(); } setTimeout(()=>s.remove(), 900); }
    addEventListener('mousemove', (e)=>{ if(matchMedia('(pointer:fine)').matches) { const now=performance.now(); if(now-last>12){ spawnSpark(e.clientX, e.clientY); last=now; } } });

    /* ========= 3D Hover Tilt ========= */
    const tilts = [...document.querySelectorAll('.tilt')];
    tilts.forEach(el=>{
      el.addEventListener('mousemove', (e)=>{ const r = el.getBoundingClientRect(); const x = (e.clientX - r.left) / r.width; const y = (e.clientY - r.top) / r.height; const rx = (0.5 - y) * 10; const ry = (x - 0.5) * 10; el.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`; });
      el.addEventListener('mouseleave', ()=>{ el.style.transform = 'rotateX(0deg) rotateY(0deg)'; });
    });


    /* ========= Reduce motion toggle ========= */
    let motionReduced = false; function toggleMotion(){ motionReduced = !motionReduced; document.body.style.setProperty('animation-play-state', motionReduced ? 'paused' : 'running'); }
    window.toggleMotion = toggleMotion;
  </script>
  <script>
  function goHome() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
    // Counter animation
const counters = document.querySelectorAll('.counter');
const speed = 200; // smaller = faster

const animateCounters = (entries, observer) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const counter = entry.target;

      const updateCount = () => {
        const target = +counter.getAttribute('data-target');
        const current = +counter.innerText;

        const increment = Math.ceil(target / speed);

        if (current < target) {
          counter.innerText = current + increment;
          setTimeout(updateCount, 20);
        } else {
          counter.innerText = target;
        }
      };

      updateCount();
      observer.unobserve(counter);
    }
  });
};

const observer = new IntersectionObserver(animateCounters, { threshold: 0.3 });
counters.forEach(counter => observer.observe(counter));
</script>
    <script>
const entries = document.querySelectorAll('.entry');
const stars = document.querySelectorAll('.star');

window.addEventListener('scroll', () => {
  entries.forEach((entry, i) => {
    const rect = entry.getBoundingClientRect();
    if (rect.top >= 100 && rect.top < window.innerHeight / 2) {
      entries.forEach(e => e.classList.remove('active'));
      stars.forEach(s => s.classList.remove('active'));
      entry.classList.add('active');
      stars[i].classList.add('active');
    }
  });
});
</script>
<script>
/* ============================
   DATA: 34 strengths with domains and short descriptions
   ============================ */
const strengths = [
  { rank:1, name:"Relator", domain:"RELATIONSHIP", short:"I build close relationships and trust.", tips:"Use with customers: develop one-to-one rapport; in O2C, call the same AR contact to nurture relationships." },
  { rank:2, name:"Deliberative", domain:"EXECUTING", short:"Careful, cautious, risk-aware decision maker.", tips:"Use to evaluate exceptions and ACH/NSF cases before pushing for automation." },
  { rank:3, name:"Learner", domain:"STRATEGIC", short:"I love learning and improving.", tips:"Great for studying ICMAI — set micro-goals and learn one accounting concept per shift." },
  { rank:4, name:"Intellection", domain:"STRATEGIC", short:"I enjoy deep thinking and reflection.", tips:"Use for root-cause analysis when investigating complex payment mismatches." },
  { rank:5, name:"Input", domain:"STRATEGIC", short:"I collect ideas, facts and resources.", tips:"Build and maintain a quick-reference folder for bank codes and comment codes." },
  { rank:6, name:"Empathy", domain:"RELATIONSHIP", short:"I sense other people's feelings.", tips:"Helpful when handling upset customers; reflect back feelings to de-escalate." },
  { rank:7, name:"Individualization", domain:"RELATIONSHIP", short:"I see each person's uniqueness.", tips:"Customize communication templates — some customers prefer short emails, others phone calls." },
  { rank:8, name:"Developer", domain:"RELATIONSHIP", short:"I see and grow potential in others.", tips:"Mentor a new teammate on TANDEM processes gradually." },
  { rank:9, name:"Harmony", domain:"RELATIONSHIP", short:"I look for agreement and avoid conflict.", tips:"In dispute resolution, focus on shared goals to reach a compromise." },
  { rank:10, name:"Restorative", domain:"EXECUTING", short:"I love solving problems and fixing issues.", tips:"Perfect for exception queues — you’ll enjoy resolving partial remits and unclear checks." },

  { rank:11, name:"Ideation", domain:"STRATEGIC", short:"I generate fresh, creative ideas.", tips:"Propose small automation or template ideas to reduce repetitive manual steps." },
  { rank:12, name:"Connectedness", domain:"RELATIONSHIP", short:"I see links and a larger story.", tips:"Use when mapping how payments, credit holds, and statements affect customers." },
  { rank:13, name:"Competition", domain:"INFLUENCING", short:"I measure myself and like to win.", tips:"Set a safe productivity target (e.g., daily matched checks) and beat your own score." },
  { rank:14, name:"Strategic", domain:"STRATEGIC", short:"I spot patterns and best paths forward.", tips:"Use to design an efficient daily workflow for ACH + check queues." },
  { rank:15, name:"Positivity", domain:"RELATIONSHIP", short:"I bring energy and enthusiasm.", tips:"Lift team morale on tough night shifts with short wins and celebrations." },
  { rank:16, name:"Discipline", domain:"EXECUTING", short:"I create structure, procedures, and routines.", tips:"Create a standard start-of-shift checklist for reviewing ACH and bank files." },
  { rank:17, name:"Futuristic", domain:"STRATEGIC", short:"I imagine exciting futures and possibilities.", tips:"Sketch a 6-month improvements roadmap for faster invoice retrievals." },
  { rank:18, name:"Significance", domain:"INFLUENCING", short:"I want to make an impact and be noticed.", tips:"Volunteer for a small cross-team project to raise visibility." },
  { rank:19, name:"Maximizer", domain:"INFLUENCING", short:"I turn good into great, focus on strengths.", tips:"Spot colleagues’ strengths and pair them for complex exceptions." },
  { rank:20, name:"Achiever", domain:"EXECUTING", short:"I have stamina and like finishing tasks.", tips:"Use a visible daily checklist to get the satisfaction of crossing off items." },

  { rank:21, name:"Responsibility", domain:"EXECUTING", short:"I am reliable and keep promises.", tips:"Own a weekly folder cleanup task (invoice folder) and show consistent follow-through." },
  { rank:22, name:"Analytical", domain:"STRATEGIC", short:"I examine data and look for cause and effect.", tips:"Use when reviewing chargeback patterns by bank/comment code." },
  { rank:23, name:"Focus", domain:"EXECUTING", short:"I concentrate and prioritize what matters.", tips:"Block 45 minutes for deep exception handling without Slack/phone." },
  { rank:24, name:"Self-Assurance", domain:"INFLUENCING", short:"Confident and decisive in my choices.", tips:"Take ownership when clarifying ambiguous remits with customers." },
  { rank:25, name:"Adaptability", domain:"RELATIONSHIP", short:"Flexible and present-centered; go with the flow.", tips:"Great on shift when priorities change; pivot to urgent bank items." },
  { rank:26, name:"Arranger", domain:"EXECUTING", short:"I organize but stay flexible to optimize.", tips:"Design an efficient folder & routing structure for invoice distribution." },
  { rank:27, name:"Consistency", domain:"EXECUTING", short:"Fairness, rules and same treatment for all.", tips:"Use consistent templates and SLAs to keep customer experience uniform." },
  { rank:28, name:"Belief", domain:"EXECUTING", short:"Values-driven and principled.", tips:"Bring ethics and clarity to disputes — document decisions for audits." },
  { rank:29, name:"Communication", domain:"INFLUENCING", short:"I explain and express ideas clearly.", tips:"Write crisp emails explaining remittance mismatches — customers appreciate clarity." },

  { rank:30, name:"Context", domain:"STRATEGIC", short:"I look to the past to understand the present.", tips:"When something repeats, check the historical transaction trail to learn patterns." },
  { rank:31, name:"Activator", domain:"INFLUENCING", short:"I make things happen — quick to start.", tips:"Launch small process tests to speed up a manual reconciliation step." },
  { rank:32, name:"Command", domain:"INFLUENCING", short:"I lead confidently and take charge.", tips:"Step up to drive a cross-team decision when there’s ambiguity." },
  { rank:33, name:"Woo", domain:"INFLUENCING", short:"I win others over and start conversations easily.", tips:"Use at onboarding calls to build rapport with new vendors." },
  { rank:34, name:"Includer", domain:"RELATIONSHIP", short:"You make people feel part of a group.", tips:"Make sure quieter teammates get credit in team updates." }
];

/* Domain order & colors */
const domainOrder = [
  { key:"EXECUTING", label:"Executing", css:"domain-executing", color:"#8b61ff" },
  { key:"INFLUENCING", label:"Influencing", css:"domain-influencing", color:"#ff9b3f" },
  { key:"RELATIONSHIP", label:"Relationship Building", css:"domain-relationship", color:"#3aa0ff" },
  { key:"STRATEGIC", label:"Strategic Thinking", css:"domain-strategic", color:"#38d07a" }
];

/* ====== Build UI with D3 (grid columns + tiles) ====== */
const grid = d3.select('#grid');

/* Create one column per domain */
const columns = grid.selectAll('.column')
  .data(domainOrder)
  .join('div')
    .attr('class','column')
    .attr('data-domain', d => d.key)
    .each(function(domainInfo){
      const col = d3.select(this);
      col.append('h3').text(domainInfo.label);
      col.append('div').attr('class','count').text('0');
      col.append('div').attr('class','list'); // will hold tiles
    });

/* function to update counts and tiles */
function renderTiles(data){
  domainOrder.forEach(dom => {
    const items = data.filter(d => d.domain === dom.key).sort((a,b)=> a.rank - b.rank);
    const list = grid.select(`[data-domain="${dom.key}"] .list`);
    // update count
    grid.select(`[data-domain="${dom.key}"] .count`).text(items.length);

    // bind tiles
    const tiles = list.selectAll('.tile')
      .data(items, d => d.rank);

    // exit
    tiles.exit().transition().duration(250).style('opacity',0).remove();

    // enter
    const enter = tiles.enter()
      .append('div')
        .attr('class', d => `tile ${dom.css}`)
        .style('opacity',0)
        .on('mousemove', tileMouseMove)
        .on('mouseout', tileMouseOut)
        .on('click', tileClick);

    enter.append('div').attr('class','rank').text(d => d.rank);
    const info = enter.append('div').style('min-width','0px'); // wrapper
    info.append('div').attr('class','name').text(d => d.name);
    info.append('div').attr('class','sub').text(d => `#${d.rank} • ${dom.label}`);

    // merge + transition
    enter.merge(tiles)
      .transition().duration(350)
      .style('opacity',1)
      .style('transform','translateY(0)');
  });
}

/* initial render */
renderTiles(strengths);
  renderCliftonSVGBar(strengths);


/* TOOLTIP elements */
const tooltip = d3.select('#tooltip');

function tileMouseMove(event, d){
  // show tooltip with short description
  tooltip.style('display','block')
         .html(`<strong style="display:block;margin-bottom:6px">${d.rank}. ${d.name}</strong>
                <div style="color:var(--muted);font-size:13px">${d.short}</div>`);
  // position tooltip near pointer, with small offset
  const [mx,my] = d3.pointer(event);
  const left = event.clientX + 12;
  const top = event.clientY + 12;
  tooltip.style('left', left + 'px').style('top', top + 'px');
  // highlight same-domain tiles
  d3.selectAll('.tile').classed('muted', t => t.domain !== d.domain);
  highlightRank(d.rank);

}


function tileMouseOut(){
  tooltip.style('display','none');
  d3.selectAll('.tile').classed('muted', false);
  clearAllHighlights();

}

function tileClick(event, d) {
  const isMobile = window.innerWidth <= 900;

  if (isMobile) {
    // Show mobile modal
    const modal = document.getElementById("mobileModal");
    const body = document.getElementById("mobileModalBody");

    body.innerHTML = `
      <h2 style="color: var(--domColor)">
        ${d.rank}. ${d.name} 
        <span style="font-size:13px;color:var(--muted);margin-left:8px">(${d.domain})</span>
      </h2>
      <p style="font-size:14px;margin:4px 0 10px 0;color:#fff">${d.short}</p>
      <p><strong>How to use this strength:</strong> ${d.tips}</p>
    `;

    const domColor = domainOrder.find(x => x.key === d.domain).color;
    body.querySelector("h2").style.color = domColor;

    modal.style.display = "block";

    // Close button
    modal.querySelector(".close-btn").onclick = () => {
      modal.style.display = "none";
    };

  } else {
    // Desktop → update side details panel
    const details = d3.select('#details');
    details.html(`
      <h2 style="color: var(--domColor)">
        ${d.rank}. ${d.name} 
        <span style="font-size:13px;color:var(--muted);margin-left:8px">(${d.domain})</span>
      </h2>
      <p style="font-size:14px;margin:4px 0 10px 0;color:#fff">${d.short}</p>
      <p><strong>How to use this strength (practical):</strong> ${d.tips}</p>
      <p style="margin-top:8px;font-size:13px;color:var(--muted)">
        Tap another tile to view its notes. Use the Search to filter.
      </p>
    `);

    const domColor = domainOrder.find(x => x.key===d.domain).color;
    details.select('h2').style('color', domColor);

    // highlight in top bar
    d3.select('#svgBarWrap svg').selectAll('rect')
       .attr('stroke', null).attr('stroke-width', null);
    d3.select('#svgBarWrap svg rect[data-rank="' + d.rank + '"]')
       .attr('stroke', '#fff').attr('stroke-width', 2);

    highlightRank(d.rank);
  }
}

/* ===== Stack bar showing distribution of domains ===== */
function clearAllHighlights(){
  d3.select('#svgBarWrap svg').selectAll('rect')
    .attr('stroke', null).attr('stroke-width', null);
  d3.selectAll('.tile').classed('muted', false);
  d3.selectAll('.stack-seg')
    .attr('opacity', 1)
    .attr('stroke', null)
    .attr('stroke-width', null);
}
function highlightRank(rank){
  // Top barcode
  d3.select('#svgBarWrap svg').selectAll('rect')
    .attr('stroke', null).attr('stroke-width', null);
  d3.select('#svgBarWrap svg rect[data-rank="' + rank + '"]')
    .attr('stroke', '#fff').attr('stroke-width', 2);
  // Tiles
  d3.selectAll('.tile').classed('muted', t => t.rank !== rank);
  // Stackbar segments
  const strength = strengths.find(s => s.rank === rank);
  if(strength){
    d3.selectAll('.stack-seg')
      .attr('opacity', s => s.key === strength.domain ? 1 : 0.25)
      .attr('stroke', s => s.key === strength.domain ? '#fff' : null)
      .attr('stroke-width', s => s.key === strength.domain ? 2 : null);
  }
}
function highlightDomain(domainKey){
  // tiles by domain
  d3.selectAll('.tile').classed('muted', t => t.domain !== domainKey);

  // top bars by domain
  const bars = d3.select('#svgBarWrap svg').selectAll('rect');
  bars.attr('stroke', null).attr('stroke-width', null);
  bars.filter(d => d && d.domain === domainKey)
      .attr('stroke', '#fff').attr('stroke-width', 2);

  // stackbar emphasize the selected segment
  d3.selectAll('.stack-seg')
    .attr('opacity', s => s && s.key === domainKey ? 1 : 0.25)
    .attr('stroke', s => s && s.key === domainKey ? '#fff' : null)
    .attr('stroke-width', s => s && s.key === domainKey ? 2 : null);
}
function renderStackBar(data){
  const counts = domainOrder.map(dom => {
    return { key: dom.key, label: dom.label, color: dom.color, count: data.filter(d => d.domain===dom.key).length };
  });
  const total = d3.sum(counts, d => d.count);

  const width = 520;
  const height = 16;
  d3.select('#stackbar').html(''); // clear
const svg = d3.select('#stackbar').append('svg')
  .attr('viewBox', `0 0 ${width} ${height}`)
  .attr('preserveAspectRatio', 'xMidYMid meet')
  .attr('width', null)
  .attr('height', null);
  let x = 0;
counts.forEach(segment => {
  const segW = Math.round((segment.count / total) * width);
svg.append('rect')
  .attr('x', x)
  .attr('y', 0)
  .attr('width', segW)
  .attr('height', height)
  .attr('fill', segment.color)
  .attr('rx', 4)
  .attr('class', 'stack-seg')
  .append('title').text(`${segment.label}: ${segment.count}`);
  x += segW; // advance x for next segment
}); // <- close forEach properly

  // legend to right
  const legend = d3.select('#stackLegend').html('');
  counts.forEach(seg => {
    legend.append('div').style('display','flex').style('gap','6px').style('align-items','center').html(`
      <div style="width:12px;height:12px;border-radius:3px;background:${seg.color}"></div>
      <div style="font-size:13px;color:var(--muted)">${seg.label} (${seg.count})</div>
    `);
  });
}
renderStackBar(strengths);

/* ===== Controls: Search, Top5, Export CSV ===== */
d3.select('#search').on('input', function(){
  const q = this.value.trim().toLowerCase();
  if(!q){
    d3.selectAll('.tile').style('opacity',1);
    return;
  }
  d3.selectAll('.tile').each(function(d){
    const match = d.name.toLowerCase().includes(q) || String(d.rank) === q;
    d3.select(this).style('opacity', match ? 1 : 0.18);
  });
});

let top5Active = false;

d3.select('#top5').on('click', function(){
  if (!top5Active) {
    // activate
    d3.selectAll('.tile').style('opacity', t => (t.rank <= 5 ? 1 : 0.12)); // highlight top 5 tiles [web:74]
    // outline the top 5 bars
    const svgBars = d3.select('#svgBarWrap svg').selectAll('rect');
    svgBars.attr('stroke', null).attr('stroke-width', null);
    strengths.filter(s => s.rank <= 5).forEach(s => {
      d3.select('#svgBarWrap svg rect[data-rank="' + s.rank + '"]')
        .attr('stroke', '#fff').attr('stroke-width', 2);
    });
    top5Active = true;
  } else {
    // deactivate: full reset
    d3.selectAll('.tile').style('opacity', 1);
    clearAllHighlights(); // clears strokes and mutes [web:74]
    top5Active = false;
  }
});


d3.select('#exportCSV').on('click', function(){
  const rows = ["rank,name,domain,short"];
  strengths.forEach(s => rows.push(`${s.rank},"${s.name.replace(/"/g,'""')}","${s.domain}","${s.short.replace(/"/g,'""')}"`));
  const blob = new Blob([rows.join("\n")], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'clifton_strengths_34.csv';
  a.click();
  URL.revokeObjectURL(url);
});

/* ===== Responsive niceties: if header overlaps, add top padding (optional) ===== */
/* If you embed into a page with a fixed header, call:
     document.querySelector('#app').style.paddingTop = '80px';
   (example included in integration notes)
*/

/* If you want to re-render after editing data, call:
     renderTiles(newData); renderStackBar(newData);
*/

/* END OF SCRIPT */
 function renderCliftonSVGBar(data) {
  const domainColors = {
    EXECUTING: "#8b61ff",
    INFLUENCING: "#ff9b3f",
    RELATIONSHIP: "#3aa0ff",
    STRATEGIC: "#38d07a"
  };

  const svgWidth = 500, svgHeight = 60;
  const barWidth = 8, barHeight = 40, spacing = 12;

  // Reset
  d3.select('#svgBarWrap').html('');
 const svg = d3.select('#svgBarWrap')
  .append('svg')
  .attr('viewBox', `0 0 ${svgWidth} ${svgHeight}`)
  .attr('preserveAspectRatio','xMidYMid meet')
  .attr('width', null)
  .attr('height', null);


  // ---- helper function to draw a group of bars ----
  function drawBars(container, bars) {
    container.selectAll('rect')
      .data(bars)
      .enter()
      .append('rect')
        .attr('x', (d,i) => i * spacing)
        .attr('y', 0)
        .attr('width', barWidth)
        .attr('height', barHeight)
        .attr('rx', 2)
        .attr('fill', d => domainColors[d.domain] || '#ccc')
        .attr('data-rank', d => d.rank)
        .style('cursor','pointer')
.on('mouseover', function(e,d) {
  barHoverOnly(d); // highlight only — no tooltip or details
})
.on('mouseout', function() {
  clearAllHighlights(); // reset everything
})
.on('click', function(e,d) {
  tileClick(e,d); // open details panel if clicked
});

  }

  // ---- LEFT 5 bars ----
  const leftBars = data.filter(d => d.rank <= 5);
  const leftG = svg.append('g').attr('transform','translate(0,10)');
  drawBars(leftG, leftBars);

  // ---- Decorative lines left ----
  svg.append('line').attr('x1',0).attr('y1',5).attr('x2',56).attr('y2',5)
    .attr('stroke','#bfbfbf').attr('stroke-width',6).attr('stroke-linecap','round');
  svg.append('line').attr('x1',0).attr('y1',55).attr('x2',56).attr('y2',55)
    .attr('stroke','#bfbfbf').attr('stroke-width',6).attr('stroke-linecap','round');

  // ---- Diagonals after 5 bars ----
  svg.append('line').attr('x1',56).attr('y1',5).attr('x2',116).attr('y2',55)
    .attr('stroke','#bfbfbf').attr('stroke-width',6).attr('stroke-linecap','round');
  svg.append('line').attr('x1',56).attr('y1',55).attr('x2',116).attr('y2',5)
    .attr('stroke','#bfbfbf').attr('stroke-width',6).attr('stroke-linecap','round');

  // ---- RIGHT 29 bars ----
  const rightBars = data.filter(d => d.rank > 5);
  const rightG = svg.append('g').attr('transform','translate(116,10)');
  drawBars(rightG, rightBars);

  // ---- Decorative lines right ----
  svg.append('line')
    .attr('x1',116).attr('y1',5).attr('x2',500).attr('y2',5)
    .attr('stroke','#bfbfbf').attr('stroke-width',6).attr('stroke-linecap','round');
  svg.append('line')
    .attr('x1',116).attr('y1',55).attr('x2',500).attr('y2',55)
    .attr('stroke','#bfbfbf').attr('stroke-width',6).attr('stroke-linecap','round');
}
function barHoverOnly(d){
  // Reset previous highlights
  d3.selectAll('.tile').classed('muted', false).classed('highlighted', false);
  clearAllHighlights(); // clears stackbar and top bar strokes

  // Highlight the top barcode
  d3.select('#svgBarWrap svg rect[data-rank="' + d.rank + '"]')
    .attr('stroke', '#fff')
    .attr('stroke-width', 2);

  // Highlight the corresponding tile
  d3.selectAll('.tile')
    .filter(t => t.rank === d.rank)
    .classed('highlighted', true);

  // Muted effect for other tiles (optional)
  d3.selectAll('.tile')
    .filter(t => t.rank !== d.rank)
    .classed('muted', true);

  // Highlight stackbar
  const strength = strengths.find(s => s.rank === d.rank);
  if(strength){
    d3.selectAll('.stack-seg')
      .attr('opacity', s => s.key === strength.domain ? 1 : 0.25)
      .attr('stroke', s => s.key === strength.domain ? '#fff' : null)
      .attr('stroke-width', s => s.key === strength.domain ? 2 : null);
  }
}


</script>

<script>
function renderMiniDNA(rankToHighlight) {
  const domainColors = {
    EXECUTING: "#8b61ff",
    INFLUENCING: "#ff9b3f",
    RELATIONSHIP: "#3aa0ff",
    STRATEGIC: "#38d07a"
  };

  const svgWidth = 500, svgHeight = 60;
  const barWidth = 8, barHeight = 40, spacing = 12;

  // Reset existing DNA svg in that section
  d3.select("#relatorDNA").html("");

  const svg = d3.select("#relatorDNA")
    .append("svg")
    .attr("viewBox", `0 0 ${svgWidth} ${svgHeight}`)
    .attr("preserveAspectRatio","xMidYMid meet")
    .attr("width", null)
    .attr("height", null);

  // draw function same as main one
  function drawBars(container, bars) {
    container.selectAll("rect")
      .data(bars)
      .enter()
      .append("rect")
        .attr("x", (d,i) => i * spacing)
        .attr("y", 10)
        .attr("width", barWidth)
        .attr("height", barHeight)
        .attr("rx", 2)
        .attr("fill", d =>
          d.rank === rankToHighlight
            ? domainColors[d.domain]
            : "rgba(255,255,255,0.15)"
        )
        .attr("data-rank", d => d.rank);
  }

  // ---- LEFT 5 bars ----
  const leftBars = strengths.filter(d => d.rank <= 5);
  const leftG = svg.append("g").attr("transform","translate(0,10)");
  drawBars(leftG, leftBars);

  // ---- Decorative lines left ----
  svg.append("line").attr("x1",0).attr("y1",5).attr("x2",56).attr("y2",5)
    .attr("stroke","#bfbfbf").attr("stroke-width",6).attr("stroke-linecap","round");
  svg.append("line").attr("x1",0).attr("y1",55).attr("x2",56).attr("y2",55)
    .attr("stroke","#bfbfbf").attr("stroke-width",6).attr("stroke-linecap","round");

  // ---- Diagonals after 5 bars ----
  svg.append("line").attr("x1",56).attr("y1",5).attr("x2",116).attr("y2",55)
    .attr("stroke","#bfbfbf").attr("stroke-width",6).attr("stroke-linecap","round");
  svg.append("line").attr("x1",56).attr("y1",55).attr("x2",116).attr("y2",5)
    .attr("stroke","#bfbfbf").attr("stroke-width",6).attr("stroke-linecap","round");

  // ---- RIGHT 29 bars ----
  const rightBars = strengths.filter(d => d.rank > 5);
  const rightG = svg.append("g").attr("transform","translate(116,10)");
  drawBars(rightG, rightBars);

  // ---- Decorative lines right ----
  svg.append("line")
    .attr("x1",116).attr("y1",5).attr("x2",500).attr("y2",5)
    .attr("stroke","#bfbfbf").attr("stroke-width",6).attr("stroke-linecap","round");
  svg.append("line")
    .attr("x1",116).attr("y1",55).attr("x2",500).attr("y2",55)
    .attr("stroke","#bfbfbf").attr("stroke-width",6).attr("stroke-linecap","round");

  // subtle glow on highlighted bar
  svg.selectAll("rect")
    .filter(d => d.rank === rankToHighlight)
    .attr("stroke","#fff")
    .attr("stroke-width",1.8)
    .attr("filter","drop-shadow(0 0 6px #3aa0ff)");
}

document.addEventListener("DOMContentLoaded", () => {
  renderMiniDNA(1); // Relator’s rank = 1
});
</script>












  
  <!-- Mobile modal popup -->
<div id="mobileModal" class="mobile-modal">
  <div class="mobile-modal-content">
    <span class="close-btn">&times;</span>
    <div id="mobileModalBody"></div>
  </div>
</div>
</body>
</html>
